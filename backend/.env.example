# DCA Quant Backend Configuration
# Copy this file to .env and customize for your environment

# =============================================================================
# Database Configuration
# =============================================================================
# SQLAlchemy database URL
#
# SQLite (default - recommended for personal use):
#   DATABASE_URL=sqlite:///./data/database.sqlite
#
# PostgreSQL (for production/scaling):
#   DATABASE_URL=postgresql://user:password@localhost:5432/quant_db
#
# Docker (SQLite with volume):
#   DATABASE_URL=sqlite:///./data/database.sqlite
#
DATABASE_URL=sqlite:///./data/database.sqlite

# =============================================================================
# Redis Configuration (for job queue)
# =============================================================================
# Local: redis://localhost:6379
# Docker: redis://redis:6379
REDIS_URL=redis://localhost:6379

# =============================================================================
# Data Lake Configuration
# =============================================================================
# Path to the Parquet data lake (relative or absolute)
DATA_LAKE_PATH=./data_lake

# =============================================================================
# API Configuration
# =============================================================================
# Allowed CORS origins (JSON array format)
CORS_ORIGINS=["http://localhost:5173","http://localhost:3000"]

# =============================================================================
# MLflow Configuration
# =============================================================================
# MLflow tracking URI (local directory or remote server)
MLFLOW_TRACKING_URI=./mlruns

# =============================================================================
# Feature Flags
# =============================================================================
# Enable debug mode (verbose logging, development features)
DEBUG_MODE=false

# =============================================================================
# Job Configuration
# =============================================================================
# Maximum retry attempts for failed jobs
JOB_MAX_RETRIES=3

# Base delay for exponential backoff (seconds)
JOB_RETRY_BASE_DELAY=4.0

# Maximum retry delay cap (seconds)
JOB_RETRY_MAX_DELAY=60.0

# =============================================================================
# Data Freshness (Phase 3)
# =============================================================================
# Maximum acceptable data lag in hours before warning
DATA_FRESHNESS_THRESHOLD_HOURS=24.0

# =============================================================================
# Circuit Breaker (Phase 3)
# =============================================================================
# Number of consecutive failures before circuit opens
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5

# Seconds before attempting recovery from OPEN state
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60.0

# =============================================================================
# Rate Limiting
# =============================================================================
# Requests per second (e.g. 2.0 = 2 calls/sec)
RATE_LIMIT_REQUESTS_PER_SECOND=2.0

# Burst size (allow short bursts of traffic)
RATE_LIMIT_BURST_SIZE=5

# =============================================================================
# Logging
# =============================================================================
# Enable developer mode (emojis, more verbose console output)
LOG_DEV_MODE=false

# =============================================================================
# Valuation Defaults
# =============================================================================
# WACC (Weighted Average Cost of Capital)
VALUATION_WACC=0.09

# Growth Rate for initial stage
VALUATION_GROWTH_RATE=0.05

# Terminal Growth Rate
VALUATION_TERMINAL_GROWTH=0.02

# =============================================================================
# Optimization Defaults
# =============================================================================
# Maximum weight per asset (0.10 = 10%)
OPTIMIZATION_MAX_WEIGHT=0.10

# Risk Aversion parameter for optimization
OPTIMIZATION_RISK_AVERSION=1.0

# =============================================================================
# Factor Weights (Phase 4)
# =============================================================================
# JSON dictionary for Bull Market weights
FACTOR_WEIGHTS_BULL='{"value": 0.3, "growth": 0.4, "momentum": 0.3}'

# JSON dictionary for Bear Market weights
FACTOR_WEIGHTS_BEAR='{"value": 0.5, "growth": 0.2, "momentum": 0.3}'
